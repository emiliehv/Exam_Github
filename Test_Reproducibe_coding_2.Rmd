---
title: "Test_Reproducible_coding"
output: html_document
date: "2023-06-13"
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

Reproducible coding tutorial

------------------

Part 1

Work on following tools to for reproducible research:

Data manipulation with dplyrLinks to an external site. and tidyrLinks to an external site.
quartoLinks to an external site. (recommended) OR RmarkdownLinks to an external site. (but use exercises from the quarto book)
date manipulation with lubridate tutorial (in the biostats.tutorialsLinks to an external site. package - see link for installation and use instructions)
string manipulation with stringr tutorial (in the biostats.tutorialsLinks to an external site. package)

------------------

Part 2

Find an interesting dataset on DataDryad.org (or another data repository) and download it. Make an RStudio project to reproduce one or more of the figures in the paper associated with the dataset, making your analysis as reproducible as possible by using (at least)

git and GitHub
renv for package management
Best practice for comments and code style
here package for helping load data
quarto or Rmarkdown for the document (reference the data source and the original paper)
When you are done, push the whole project to GitHub.

------------------

To do: 

- renv for package management

```{r}
library(renv) #To do
```

- here package for helping load data

```{r}
library(here) #To do
here()
```

Data set from DRYAD: https://datadryad.org/stash/dataset/doi:10.5061/dryad.1ns1rn8tb

1. Download data belonging to Figure 2 in the paper

```{r}
Figure2_df <- read.csv("Reproducible_ecosystemes_Figure2.csv", sep = ";", header = TRUE ) #Download csv.-file with data needed for Figure 2
```

2. Plot Figure 2

```{r}
library(ggforce) #Function geom_sina
library(ggplot2) #Function ggplot

#Right order of categories

Figure2_df$Category <- factor(Figure2_df$Category,
                                         levels = paste(c("Rotifera","Cladocera","Copepoda"))) #Right order of species categories
Figure2_df$Located_site <- factor(Figure2_df$Located_site,
                                         levels = paste(c("Lake_Qiandaohu","Guangdong_reservoirs"))) #Right order of sites

#Plot

ggplot(Figure2_df, aes(x=Category, y=Body_length_mm, color=Located_site, fill=Located_site)) + #Specify variables and color/fill for the figure
  geom_violin(lwd=1)+ #Thickness of lines
  labs(y = "Body length") +
  scale_color_manual(values=c("grey", "black"), limits=c("Lake_Qiandaohu", "Guangdong_reservoirs"), labels=c('Lake Qiandaohu', 'Guangdong reservoirs')) + #Line color
  scale_fill_manual(values=c("white", "white"), limits=c("Lake_Qiandaohu", "Guangdong_reservoirs"), labels=c('Lake Qiandaohu', 'Guangdong reservoirs')) + #Fill color
  theme_test() + #Adjusted theme 
  theme(
    legend.position = c(0.22, 0.78), #Legend position
    axis.title.x=element_blank(), 
    legend.title=element_blank(),
    axis.text = element_text(size=16),
    axis.title.y = element_text(size = 16),
    legend.text = element_text(size=16)) +
  geom_sina(alpha=0.5) #Include dots

```


------------------

Part 3

Code review your neighbour's code on GitHub to identify aspects that may not be reproducible. Leave a GitHub issue to report any problems